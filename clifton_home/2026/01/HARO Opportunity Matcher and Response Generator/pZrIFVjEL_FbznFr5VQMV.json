{"updatedAt":"2026-01-26T20:22:07.816Z","createdAt":"2026-01-26T20:17:07.127Z","id":"pZrIFVjEL_FbznFr5VQMV","name":"HARO Opportunity Matcher and Response Generator","description":null,"active":false,"isArchived":false,"nodes":[{"parameters":{"pollTimes":{"item":[{"hour":5}]},"filters":{"sender":"haro@helpareporter.com"}},"id":"8eb00a78-3e4e-4f35-8124-b344f9434ed5","name":"Watch for HARO Emails","type":"n8n-nodes-base.gmailTrigger","typeVersion":1.3,"position":[-240,-240],"credentials":{"gmailOAuth2":{"id":"V1tJJxxIv882xXCu","name":"Gmail account Alex"}}},{"parameters":{"operation":"select","schema":{"__rl":true,"mode":"name","value":"public"},"table":{"__rl":true,"mode":"name","value":"processed_haro_emails"},"limit":1,"where":{"values":[{"column":"email_id","value":"={{ $json.id }}"}]},"options":{}},"id":"251d794c-8bde-4b24-bfd3-984b15244f12","name":"Check if Email Already Processed","type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[-16,-240],"credentials":{"postgres":{"id":"zc5cxK0fywJgEgsv","name":"Local Clifton DB"}}},{"parameters":{"mode":"runOnceForEachItem","jsCode":"// Check if email was found in database\nconst dbResult = $input.item.json;\n\n// If the database returned a result with a count > 0, it's a duplicate\nconst isDuplicate = dbResult.count && dbResult.count > 0;\n\n// Get the original email data from the previous node\nconst emailData = $('Watch for HARO Emails').item.json;\n\n// Return the result with isDuplicate flag and original email data\nreturn {\n  json: {\n    isDuplicate: isDuplicate,\n    ...emailData\n  }\n};"},"id":"6a2d82ee-8141-4bca-a6fe-531cc75476e5","name":"Check Duplicate Status","type":"n8n-nodes-base.code","typeVersion":2,"position":[208,-240]},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":3},"conditions":[{"id":"id-1","leftValue":"={{ $('Check Duplicate Status').item.json.isDuplicate }}","rightValue":false,"operator":{"type":"boolean","operation":"equals"}}],"combinator":"and"},"options":{}},"id":"3e22ab01-6d0c-47b1-8643-386d125f83f4","name":"Is New Email?","type":"n8n-nodes-base.if","typeVersion":2.3,"position":[432,-240]},{"parameters":{"operation":"text","options":{}},"id":"869d9c2f-7ec9-4dfb-8536-8ac18d5370dc","name":"Extract Email Content","type":"n8n-nodes-base.extractFromFile","typeVersion":1.1,"position":[656,-240]},{"parameters":{"promptType":"define","text":"={{ $json.data }}","hasOutputParser":true,"options":{"systemMessage":"You are an expert at analyzing HARO (Help A Reporter Out) emails to identify opportunities for subject matter experts.\n\nYour task is to:\n1. Read the HARO email content carefully\n2. Identify any queries where the following expertise would be valuable:\n   - Kubernetes and software infrastructure\n   - Enterprise software architecture\n   - Software development and SaaS products\n   - Business automation at scale\n   - AI automation for businesses\n   - Private aviation/piloting\n   - Location-specific: Louisville, Kentucky\n\n3. For each relevant opportunity, extract:\n   - The reporter's query/request\n   - Why this person's expertise matches\n   - The deadline (if mentioned)\n   - Contact information for the reporter\n\n4. Only return opportunities that are a strong match for the expertise areas listed above\n5. If no relevant opportunities are found, return an empty array\n\nReturn your findings in the structured format defined by the output parser."}},"id":"6b7139ec-804d-4eb6-b35e-11a80a9ec455","name":"Analyze HARO Opportunities","type":"@n8n/n8n-nodes-langchain.agent","typeVersion":3.1,"position":[880,-240]},{"parameters":{"model":{"__rl":true,"mode":"id","value":"gpt-4o"},"builtInTools":{},"options":{}},"id":"23b38b81-bd82-41ad-b270-603135697b96","name":"OpenAI GPT-4","type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.3,"position":[896,-16],"credentials":{"openAiApi":{"id":"QIZjLJ92uPOcCDE8","name":"OpenAi account"}}},{"parameters":{"schemaType":"manual","inputSchema":"{\n  \"type\": \"object\",\n  \"properties\": {\n    \"opportunities\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"query\": {\n            \"type\": \"string\"\n          },\n          \"matchReason\": {\n            \"type\": \"string\"\n          },\n          \"deadline\": {\n            \"type\": \"string\"\n          },\n          \"contactInfo\": {\n            \"type\": \"string\"\n          }\n        }\n      }\n    },\n    \"hasRelevantOpportunities\": {\n      \"type\": \"boolean\"\n    }\n  }\n}"},"id":"e3414c70-d9b2-4298-ac4b-1956c818305b","name":"Structure Opportunity Data","type":"@n8n/n8n-nodes-langchain.outputParserStructured","typeVersion":1.3,"position":[1024,-16]},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":3},"conditions":[{"id":"id-1","leftValue":"={{ $json.hasRelevantOpportunities }}","rightValue":true,"operator":{"type":"boolean","operation":"equals"}}],"combinator":"and"},"options":{}},"id":"dc066741-796c-4ce7-b669-1e38441db45b","name":"Found Relevant Opportunities?","type":"n8n-nodes-base.if","typeVersion":2.3,"position":[1232,-240]},{"parameters":{"promptType":"define","text":"=Opportunity: {{ $json.opportunities[0].query }}\n\nWhy I match: {{ $json.opportunities[0].matchReason }}\n\nDeadline: {{ $json.opportunities[0].deadline }}\n\nContact: {{ $json.opportunities[0].contactInfo }}","options":{"systemMessage":"You are an expert at crafting professional, compelling responses to HARO (Help A Reporter Out) queries.\n\nYour task is to:\n1. Review the opportunity details provided\n2. Draft a professional response email that:\n   - Introduces the expert briefly\n   - Explains their relevant expertise and credentials\n   - Provides a thoughtful, helpful response to the reporter's query\n   - Offers to provide additional information if needed\n   - Is concise but informative (2-3 paragraphs)\n   - Uses a professional but friendly tone\n\nExpert background to reference:\n- Kubernetes and software infrastructure specialist\n- Enterprise software architect\n- Software developer and SaaS founder\n- Private pilot\n- Based in Louisville, Kentucky\n- Business automation at scale specialist\n- AI automation consultant for businesses\n\nReturn ONLY the email body text, ready to be sent."}},"id":"212c77d6-44bf-4de4-a6a4-5b01dd6cf47e","name":"Generate Response Draft","type":"@n8n/n8n-nodes-langchain.agent","typeVersion":3.1,"position":[1456,-240]},{"parameters":{"model":{"__rl":true,"mode":"id","value":"gpt-4o"},"builtInTools":{},"options":{}},"id":"5b6ff0bf-1347-430b-9394-4b5e2b478f70","name":"OpenAI GPT-4 for Response","type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.3,"position":[1536,-16],"credentials":{"openAiApi":{"id":"QIZjLJ92uPOcCDE8","name":"OpenAi account"}}},{"parameters":{"schema":{"__rl":true,"mode":"name","value":"public"},"table":{"__rl":true,"mode":"name","value":"processed_haro_emails"},"columns":{"mappingMode":"defineBelow","value":{},"matchingColumns":[],"schema":[{"id":"email_id","displayName":"email_id","required":true,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"processed_at","displayName":"processed_at","required":false,"defaultMatch":false,"display":true,"type":"dateTime","canBeUsedToMatch":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"id":"c0d41f6d-0c02-498f-a8d7-3768adc5a5a9","name":"Mark Email as Processed","type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[2032,-240],"credentials":{"postgres":{"id":"zc5cxK0fywJgEgsv","name":"Local Clifton DB"}}},{"parameters":{"sendTo":"zac16530@gmail.com","subject":"=HARO Opportunity Found: {{ $json.opportunities[0].query.substring(0, 50) }}...","emailType":"text","message":"=HARO Opportunity Alert\n\n{{ $json.opportunities[0].query }}\n\nWhy this matches your expertise:\n{{ $json.opportunities[0].matchReason }}\n\nDeadline: {{ $json.opportunities[0].deadline }}\nContact: {{ $json.opportunities[0].contactInfo }}\n\n---\n\nSUGGESTED RESPONSE:\n\n{{ $('Generate Response Draft').item.json.output }}","options":{}},"id":"6aa9a8e9-60d6-460d-8f13-77ca4508de87","name":"Send Opportunity Email","type":"n8n-nodes-base.gmail","typeVersion":2.2,"position":[1808,-240],"webhookId":"785964ed-b905-4ad6-808c-fe79773dd143","credentials":{"gmailOAuth2":{"id":"V1tJJxxIv882xXCu","name":"Gmail account Alex"}}}],"connections":{"Watch for HARO Emails":{"main":[[{"node":"Check if Email Already Processed","type":"main","index":0}]]},"Check if Email Already Processed":{"main":[[{"node":"Check Duplicate Status","type":"main","index":0}]]},"Check Duplicate Status":{"main":[[{"node":"Is New Email?","type":"main","index":0}]]},"Is New Email?":{"main":[[{"node":"Extract Email Content","type":"main","index":0}]]},"Extract Email Content":{"main":[[{"node":"Analyze HARO Opportunities","type":"main","index":0}]]},"Analyze HARO Opportunities":{"main":[[{"node":"Found Relevant Opportunities?","type":"main","index":0}]]},"OpenAI GPT-4":{"ai_languageModel":[[{"node":"Analyze HARO Opportunities","type":"ai_languageModel","index":0}]]},"Structure Opportunity Data":{"ai_outputParser":[[{"node":"Analyze HARO Opportunities","type":"ai_outputParser","index":0}]]},"Found Relevant Opportunities?":{"main":[[{"node":"Generate Response Draft","type":"main","index":0}]]},"Generate Response Draft":{"main":[[{"node":"Send Opportunity Email","type":"main","index":0}]]},"OpenAI GPT-4 for Response":{"ai_languageModel":[[{"node":"Generate Response Draft","type":"ai_languageModel","index":0}]]},"Send Opportunity Email":{"main":[[{"node":"Mark Email as Processed","type":"main","index":0}]]}},"settings":{"executionOrder":"v1","binaryMode":"separate","availableInMCP":false},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"249499ea-6eab-423f-9f6b-0d2dd4ab963c","activeVersionId":null,"versionCounter":11,"triggerCount":0,"shared":[{"updatedAt":"2026-01-26T20:17:07.127Z","createdAt":"2026-01-26T20:17:07.127Z","role":"workflow:owner","workflowId":"pZrIFVjEL_FbznFr5VQMV","projectId":"IbSEWMWujt4v9pwR","project":{"updatedAt":"2026-01-20T02:36:13.950Z","createdAt":"2025-12-27T17:56:55.369Z","id":"IbSEWMWujt4v9pwR","name":"Zac Clifton <zac16530@gmail.com>","type":"personal","icon":null,"description":null,"creatorId":"ec0e00c1-c94c-415c-8a06-1d74c6c63f94","projectRelations":[{"updatedAt":"2025-12-27T17:56:55.369Z","createdAt":"2025-12-27T17:56:55.369Z","userId":"ec0e00c1-c94c-415c-8a06-1d74c6c63f94","projectId":"IbSEWMWujt4v9pwR","user":{"updatedAt":"2026-02-05T08:33:33.193Z","createdAt":"2025-12-27T17:56:53.886Z","id":"ec0e00c1-c94c-415c-8a06-1d74c6c63f94","email":"zac16530@gmail.com","firstName":"Zac","lastName":"Clifton","personalizationAnswers":{"version":"v4","personalization_survey_submitted_at":"2025-12-27T17:58:17.859Z","personalization_survey_n8n_version":"2.2.1"},"settings":{"userActivated":true,"easyAIWorkflowOnboarded":true,"firstSuccessfulWorkflowId":"MsLT810d05Z0WgATw251C","userActivatedAt":1768898015272,"npsSurvey":{"waitingForResponse":true,"ignoredCount":1,"lastShownAt":1769370147556}},"disabled":false,"mfaEnabled":true,"lastActiveAt":"2026-02-05","isPending":false}}]}}],"tags":[],"activeVersion":null}