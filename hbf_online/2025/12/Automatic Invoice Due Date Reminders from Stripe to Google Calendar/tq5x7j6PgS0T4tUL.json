{"updatedAt":"2025-12-27T18:38:09.556Z","createdAt":"2025-12-21T17:21:26.708Z","id":"tq5x7j6PgS0T4tUL","name":"Automatic Invoice Due Date Reminders from Stripe to Google Calendar","description":null,"active":false,"isArchived":false,"nodes":[{"parameters":{"content":"## ðŸ“‹ Stripe Invoice to Google Calendar Automation\n\nThis workflow automatically monitors Stripe invoices and creates Google Calendar reminders for invoices due within the next 7 days.\n\n### Key Features:\n- Daily scheduled execution at 8 AM\n- Fetches draft invoices from Stripe\n- Filters invoices due within 7 days\n- Creates calendar events only for new invoices\n- Prevents duplicate calendar entries\n\n### Prerequisites:\n- Stripe API credentials configured\n- Google Calendar OAuth2 credentials\n- Access to target Google Calendar\n\n### Use Case:\nPerfect for freelancers, agencies, or businesses that need automated invoice due date tracking and reminders.","height":592,"width":389},"id":"12db8aa7-301c-48e9-b2b8-c4d6c4952a97","name":"Workflow Description","type":"n8n-nodes-base.stickyNote","position":[368,240],"typeVersion":1},{"parameters":{"content":"## â° Daily Schedule Setup\n\nConfigured to run every day at 8:00 AM using cron expression `0 8 * * *`\n\n**Setup Instructions:**\n1. Adjust the cron expression if needed\n2. Consider your timezone settings\n3. Test with a shorter interval during setup\n\n**Cron Format:** `minute hour day month dayofweek`","height":320,"width":300},"id":"c4e5fef2-e9a0-407e-9c33-a7d30025daba","name":"Schedule Setup","type":"n8n-nodes-base.stickyNote","position":[896,48],"typeVersion":1},{"parameters":{"rule":{"interval":[{"field":"cronExpression","expression":"0 8 * * *"}]}},"id":"58ec67ec-fb91-4c04-9cb9-da017afe3065","name":"Schedule Trigger","type":"n8n-nodes-base.scheduleTrigger","position":[1104,400],"typeVersion":1.1},{"parameters":{"content":"## ðŸ’³ Stripe API Configuration\n\n**Setup Steps:**\n1. Go to n8n Credentials\n2. Add new Stripe API credential\n3. Enter your Stripe Secret Key\n4. Test the connection\n\n**Query Parameters:**\n- `status=draft`: Only fetch draft invoices\n- `limit=100`: Maximum 100 invoices per request\n","height":424,"width":300},"id":"8bfcbc60-3af3-4204-b631-d3adce6f7c3f","name":"Stripe Setup Guide","type":"n8n-nodes-base.stickyNote","position":[480,-256],"typeVersion":1},{"parameters":{"url":"https://api.stripe.com/v1/invoices","authentication":"predefinedCredentialType","nodeCredentialType":"stripeApi","sendQuery":true,"queryParameters":{"parameters":[{"name":"status","value":"draft"},{"name":"limit","value":"100"}]},"sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/x-www-form-urlencoded"}]},"options":{}},"id":"72b75afe-0fef-46a3-b999-da3ccf3b1691","name":"Get Stripe Invoices","type":"n8n-nodes-base.httpRequest","position":[1296,400],"typeVersion":4.1},{"parameters":{"content":"## ðŸ“‹ Processing Invoice Array\n\nThe Stripe API returns invoices in a `data` array. This node splits the array so we can process each invoice individually.\n\n**What it does:**\n- Takes the `data` field from Stripe response\n- Creates separate items for each invoice\n- Enables individual processing downstream","height":376,"width":280},"id":"f6695758-d333-446e-8379-81096965ad30","name":"Array Processing","type":"n8n-nodes-base.stickyNote","position":[1232,560],"typeVersion":1},{"parameters":{"fieldToSplitOut":"data","options":{}},"id":"a6aade30-8cbf-44dc-96b4-ead84be48371","name":"Split Invoices","type":"n8n-nodes-base.itemLists","position":[1520,400],"typeVersion":3},{"parameters":{"content":"## ðŸ” Invoice Due Date Filter\n\nFilters invoices based on due date criteria:\n\n**Conditions (ALL must be true):**\n1. Invoice has a due date\n2. Due within next 7 days\n3. Due date is today or later\n\n**Logic:**\n- Converts dates to Unix timestamps\n- Uses JavaScript expressions for calculations\n- Only passes invoices meeting all criteria","height":416,"width":280},"id":"0c63a347-c22e-45d3-a85d-8ce9c00a2569","name":"Date Filter Logic","type":"n8n-nodes-base.stickyNote","position":[1584,-48],"typeVersion":1},{"parameters":{"conditions":{"options":{"version":1,"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"and","conditions":[{"id":"has-due-date","operator":{"type":"number","operation":"exists","singleValue":true},"leftValue":"={{ $json.due_date }}","rightValue":""},{"id":"due-within-7-days","operator":{"type":"number","operation":"lte"},"leftValue":"={{ $json.due_date }}","rightValue":"={{ Math.floor((Date.now() + (7 * 24 * 60 * 60 * 1000)) / 1000) }}"},{"id":"due-after-today","operator":{"type":"number","operation":"gte"},"leftValue":"={{ $json.due_date }}","rightValue":"={{ Math.floor(Date.now() / 1000) }}"}]},"options":{}},"id":"007ad07d-634c-4cc1-b8e0-ad6f1c77a6ca","name":"Filter Due Invoices","type":"n8n-nodes-base.if","position":[1728,400],"typeVersion":2},{"parameters":{"content":"## ðŸ“… Google Calendar Setup\n\n**Configuration Steps:**\n1. Create Google Calendar OAuth2 credentials\n2. Select your target calendar\n3. Set time range (next 30 days)\n\n**Purpose:**\nFetches existing calendar events to check for duplicate invoice reminders.\n\nâš ï¸ **Note:** Replace the calendar ID with your actual calendar email","height":352,"width":300},"id":"3309ccc7-bdd4-4582-a584-6f702ca74f9f","name":"Calendar API Setup","type":"n8n-nodes-base.stickyNote","position":[1888,592],"typeVersion":1},{"parameters":{"calendar":{"__rl":true,"mode":"list","value":"techdomesolutionspvtltd@gmail.com","cachedResultName":"techdomesolutionspvtltd@gmail.com"},"start":"={{ Math.floor(Date.now() / 1000) }}","end":"={{ Math.floor((Date.now() + (30 * 24 * 60 * 60 * 1000)) / 1000) }}","additionalFields":{}},"id":"07d2cba4-0897-4735-8c1d-5a9c9cb11006","name":"Google Calendar Get Events","type":"n8n-nodes-base.googleCalendar","position":[1936,400],"typeVersion":1},{"parameters":{"content":"## ðŸ”„ Duplicate Detection\n\n**Logic:**\n1. Extracts invoice IDs from existing calendar events\n2. Looks for pattern `invoice_id:XXXXXX` in event descriptions\n3. Compares current invoice ID with existing ones\n\n**Fields Created:**\n- `existing_invoice_ids`: Array of found invoice IDs\n- `current_invoice_id`: Current invoice being processed","height":384,"width":280},"id":"30f03054-10a8-4683-9db8-158e1959f139","name":"Duplicate Prevention","type":"n8n-nodes-base.stickyNote","position":[2032,-32],"typeVersion":1},{"parameters":{"fields":{"values":[{"name":"existing_invoice_ids","stringValue":"={{ $input.all().map(event => {\n  const description = event.json.description || '';\n  const match = description.match(/invoice_id:([^\\s\\n]+)/);\n  return match ? match[1] : null;\n}).filter(id => id !== null) }}"},{"name":"current_invoice_id","stringValue":"={{ $('Filter Due Invoices').item.json.id }}"}]},"options":{}},"id":"8b12c8ec-4252-4490-9a49-cba0c75f5b0d","name":"Check Invoice Exists","type":"n8n-nodes-base.set","position":[2144,400],"typeVersion":3.2},{"parameters":{"content":"## âœ… New Invoice Validation\n\n**Conditions (OR logic):**\n1. Invoice ID not found in existing events\n2. Current invoice ID exists and is valid\n\n**Result:**\nOnly new invoices (not already in calendar) will proceed to create calendar events.","height":312,"width":280},"id":"c70a542d-d544-469e-8fd3-d29324727a45","name":"New Invoice Check","type":"n8n-nodes-base.stickyNote","position":[2336,560],"typeVersion":1},{"parameters":{"conditions":{"options":{"version":1,"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"or","conditions":[{"id":"invoice-not-exists","operator":{"type":"boolean","operation":"equal"},"leftValue":"={{ !$json.existing_invoice_ids.includes($json.current_invoice_id) }}","rightValue":true},{"id":"8a1ef7b4-b24f-47ed-a9c6-bc5c0bd379c5","operator":{"type":"string","operation":"exists","singleValue":true},"leftValue":"={{ $json.current_invoice_id }}","rightValue":""}]},"options":{}},"id":"a9703708-0584-4daf-90b3-e23b5b27410a","name":"IF Not Exists","type":"n8n-nodes-base.if","position":[2352,400],"typeVersion":2},{"parameters":{"content":"## ðŸ“… Create Calendar Reminder\n\n**Event Details:**\n- **Title:** \"Pending Invoice\"\n- **Start Time:** Invoice due date\n- **Duration:** 1 hour\n- **Description:** Includes invoice ID for tracking\n\n**Customization Ideas:**\n- Add customer name to title\n- Include invoice amount\n- Set custom reminder times\n- Add invoice URL to description","height":384,"width":300},"id":"f7570c80-326a-4248-85ff-6730f80a1168","name":"Calendar Event Setup","type":"n8n-nodes-base.stickyNote","position":[2512,-16],"typeVersion":1},{"parameters":{"calendar":{"__rl":true,"mode":"list","value":"techdomesolutionspvtltd@gmail.com","cachedResultName":"techdomesolutionspvtltd@gmail.com"},"start":"={{ new Date($('Filter Due Invoices').item.json.due_date * 1000).toISOString() }}","end":"={{ new Date(($('Filter Due Invoices').item.json.due_date * 1000) + (60 * 60 * 1000)).toISOString() }}","additionalFields":{"attendees":[],"summary":"Pending Invoice Due"}},"id":"f57610fa-52d1-48f5-9a21-ac533ffcb1ac","name":"Google Calendar Create Event","type":"n8n-nodes-base.googleCalendar","position":[2560,400],"typeVersion":1}],"connections":{"IF Not Exists":{"main":[[{"node":"Google Calendar Create Event","type":"main","index":0}]]},"Split Invoices":{"main":[[{"node":"Filter Due Invoices","type":"main","index":0}]]},"Schedule Trigger":{"main":[[{"node":"Get Stripe Invoices","type":"main","index":0}]]},"Filter Due Invoices":{"main":[[{"node":"Google Calendar Get Events","type":"main","index":0}]]},"Get Stripe Invoices":{"main":[[{"node":"Split Invoices","type":"main","index":0}]]},"Check Invoice Exists":{"main":[[{"node":"IF Not Exists","type":"main","index":0}]]},"Google Calendar Get Events":{"main":[[{"node":"Check Invoice Exists","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateId":"8948"},"pinData":{},"versionId":"9110c941-86e3-4b2b-aae9-d80f112a668f","activeVersionId":null,"versionCounter":2,"triggerCount":0,"shared":[{"updatedAt":"2025-12-21T17:21:26.711Z","createdAt":"2025-12-21T17:21:26.711Z","role":"workflow:owner","workflowId":"tq5x7j6PgS0T4tUL","projectId":"pPfvO125ydUVIXPh","project":{"updatedAt":"2025-12-08T14:51:48.381Z","createdAt":"2025-12-08T14:51:42.916Z","id":"pPfvO125ydUVIXPh","name":"Alex   <alex@honeybearfinancials.com>","type":"personal","icon":null,"description":null,"creatorId":"b5c2bbf4-eb13-4025-80fb-2acb074cc668","projectRelations":[{"updatedAt":"2025-12-08T14:51:42.916Z","createdAt":"2025-12-08T14:51:42.916Z","userId":"b5c2bbf4-eb13-4025-80fb-2acb074cc668","projectId":"pPfvO125ydUVIXPh","user":{"updatedAt":"2026-02-16T05:33:07.000Z","createdAt":"2025-12-08T14:51:40.983Z","id":"b5c2bbf4-eb13-4025-80fb-2acb074cc668","email":"alex@honeybearfinancials.com","firstName":"Alex","lastName":" ","personalizationAnswers":null,"settings":{"userActivated":true,"userClaimedAiCredits":true,"easyAIWorkflowOnboarded":true,"firstSuccessfulWorkflowId":"AqqHC4HlzK2Gq3eR","userActivatedAt":1766876864154,"npsSurvey":{"responded":true,"lastShownAt":1768748391500}},"disabled":false,"mfaEnabled":false,"lastActiveAt":"2026-02-16","isPending":false}}]}}],"tags":[],"activeVersion":null}